<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SSE Client</title>
</head>
<body>
  <div id="messages"></div>
  <button id="startButton">Start SSE</button>
  <button id="stopButton">Stop SSE</button>
  <script>
    let eventSource = null;

    function showMessage(message) {
        const messagesDiv = document.getElementById('messages');
        const messageElement = document.createElement('div');
        messageElement.textContent = `${message}`;
        messagesDiv.appendChild(messageElement);
    }
    document.getElementById('startButton').addEventListener('click', () => {
      if (eventSource) {
        showMessage('SSE connection already started.');
        return;
      }
      eventSource = new EventSource('/events');

      eventSource.onmessage = function(event) {
        const data = event.data;
        showMessage(data);
      };

      eventSource.onerror = function(err) {
        showMessage(`Error: ${err.message}`);
        eventSource.close();
        eventSource = null;
      };
    });

    document.getElementById('stopButton').addEventListener('click', () => {
      if (eventSource) {
        eventSource.close();
        eventSource = null;
        showMessage('SSE connection stopped.');
      } else {
        showMessage('No SSE connection to stop.');
      }
    });
  </script>
</body>
</html>
